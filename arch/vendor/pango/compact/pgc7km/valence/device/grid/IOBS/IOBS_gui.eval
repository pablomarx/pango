*******************************************************************

  Device    [IOBS]

  Author    [jhxie]

  Abstract  []

  Revision History:

********************************************************************************/
symbol logsym_w0 of IOBS // pragma PAP_ARC_COLOR="64:64:128"
{
    // The bounding box
    generate ( 30 # 30 );

    //
    // Poloygon declaration
    //
    shape
    [ 0, 0 ]  ->  [ , 30]
                        <
                            DIN                 @[,6 ],
                            
                            DO                  @[,12],
                            TS                  @[,16],
                            MIPI_SW_DYN         @[,20],
                            INBUF_DYN_DIS_N     @[,24]
                        >
              ->  [30, ]
              ->  [  ,0]
                        <
                            PAD                 @[,15]
                        >
              ->  [ 0, ]
                        <
                            DIFFI_IN            @[10,],
                            DIFFO_IN            @[12,],
                            DIFFI_OUT           @[20,]
                        > ;

}; // symbol logsym_w0 of IOBS

symbol logsym_w1 of IOBS // pragma PAP_ARC_COLOR="64:64:128"
{
    // The bounding box
    generate ( 30 # 30 );

    //
    // Poloygon declaration
    //
    shape
    [ 0, 0 ]  ->  [ ,30]
                        <
                            DIN                 @[,6 ],
                            
                            DO                  @[,12],
                            TS                  @[,16],
                            MIPI_SW_DYN         @[,20],
                            INBUF_DYN_DIS_N     @[,24]
                        >
              ->  [30, ]
                        <
                            DIFFI_OUT           @[10,],
                            DIFFO_IN            @[18,],
                            DIFFI_IN            @[20,]
                        >
              ->  [  ,0]
                        <
                            PAD                 @[,15]
                        >
              ->  [ 0, ] ;

}; // symbol logsym_w1 of IOBS


symbol logsym_e of IOBS // pragma PAP_ARC_COLOR="64:64:128"
{
    // The bounding box
    generate ( 30 # 30 );

    //
    // Poloygon declaration
    //
    shape
    [ 0, 0 ]  ->  [ ,30]
                        <
                            DIN                 @[,6 ],
                            
                            DO                  @[,12],
                            TS                  @[,16],
                            MIPI_SW_DYN         @[,20],
                            INBUF_DYN_DIS_N     @[,24]
                        >
              ->  [30, ]
              ->  [  ,0]
                        <
                            PAD                 @[,15]
                        >
              ->  [ 0, ]
                        <
                            DIFFI_IN            @[10,],
                            DIFFO_IN            @[12,],
                            DIFFI_OUT           @[20,]
                        > ;

}; // symbol logsym_e of IOBS


symbol logsym_n0 of IOBS // pragma PAP_ARC_COLOR="64:64:128"
{
    // The bounding box
    generate ( 30 # 30 );

    //
    // Poloygon declaration
    //
    shape
    [ 0, 0 ]  ->  [ ,30]
              ->  [30, ]
                        <
                            PAD                 @[15,]
                        >
              ->  [  ,0]
                        <
                            DIFFI_OUT           @[,10],
                            DIFFO_IN            @[,18],
                            DIFFI_IN            @[,20]
                        >
              ->  [ 0, ]
                        <
                            DIN                 @[24,],
                            
                            DO                  @[18,],
                            TS                  @[14,],
                            MIPI_SW_DYN         @[10,],
                            INBUF_DYN_DIS_N     @[ 6,]
                        > ;

}; // symbol logsym_n0 of IOBS

symbol logsym_n1 of IOBS // pragma PAP_ARC_COLOR="64:64:128"
{
    // The bounding box
    generate ( 30 # 30 );

    //
    // Poloygon declaration
    //
    shape
    [ 0, 0 ]  ->  [ ,30]
                        <
                            DIFFI_IN            @[,10],
                            DIFFO_IN            @[,12],
                            DIFFI_OUT           @[,20]
                        >
              ->  [30, ]
                        <
                            PAD                 @[15,]
                        >
              ->  [  ,0]
              ->  [ 0, ]
                        <
                            DIN                 @[24,],
                            
                            DO                  @[18,],
                            TS                  @[14,],
                            MIPI_SW_DYN         @[10,],
                            INBUF_DYN_DIS_N     @[ 6,]
                        > ;

}; // symbol logsym_n1 of IOBS


symbol logsym_s0 of IOBS // pragma PAP_ARC_COLOR="64:64:128"
{
    // The bounding box
    generate ( 30 # 30 );

    //
    // Poloygon declaration
    //
    shape
    [ 0, 0 ]  ->  [ ,30]
              ->  [30, ]
                        <
                            DIN                 @[24,],
                            
                            DO                  @[18,],
                            TS                  @[14,],
                            MIPI_SW_DYN         @[10,],
                            INBUF_DYN_DIS_N     @[ 6,]
                        >
              ->  [  ,0]
                        <
                            DIFFI_OUT           @[,10],
                            DIFFO_IN            @[,18],
                            DIFFI_IN            @[,20]
                        >
              ->  [ 0, ]
                        <
                            PAD                 @[15,]
                        > ;

}; // symbol logsym_s0 of IOBS

symbol logsym_s1 of IOBS // pragma PAP_ARC_COLOR="64:64:128"
{
    // The bounding box
    generate ( 30 # 30 );

    //
    // Poloygon declaration
    //
    shape
    [ 0, 0 ]  ->  [ ,30]
                        <
                            DIFFI_IN            @[,10],
                            DIFFO_IN            @[,12],
                            DIFFI_OUT           @[,20]
                        >
              ->  [30, ]
                        <
                            DIN                 @[24,],
                            
                            DO                  @[18,],
                            TS                  @[14,],
                            MIPI_SW_DYN         @[10,],
                            INBUF_DYN_DIS_N     @[ 6,]
                        >
              ->  [  ,0]
              ->  [ 0, ]
                        <
                            PAD                 @[15,]
                        > ;

}; // symbol logsym_s1 of IOBS


/*******************************************************************************

  Device    [IOBS]

  Author    [rjliu]

  Abstract  [The schematic for IOBS]

  Revision History:

********************************************************************************/
schematic schm of IOBS
{
    // The bounding box
      generate (176 # 128);
      
    //unsigned int DO_PDIFF_MUX_X = 280;
    //unsigned int DO_PDIFF_MUX_Y = 255;      

    //
    // Layout all symbols.
    //
    device IBUFS (symbol logsym) IBUFS
        @[112,32];

    device OBUFS (symbol logsym) OBUFS
        @[32,48];
        
    device DIFFOSMUX (symbol logsym) DIFFOSMUX
        @[62,48];    
    
    device MIPIMUX (symbol logsym) MIPIMUX
        @[32,90];
        
    "0" @ [(<pin X1 of <instance MIPIMUX>>#|) - 3, <pin X1 of <instance MIPIMUX>>#-];

    map (
         <instance IBUFS>     => <instance IBUFS         of device IOBS (structure netlist)>,
         <instance OBUFS>     => <instance OBUFS         of device IOBS (structure netlist)>,
         <instance DIFFOSMUX> => <instance DIFFOSMUX     of device IOBS (structure netlist)>,
         <instance MIPIMUX>   => <instance MIPIMUX       of device IOBS (structure netlist)>
         );

    //
    // Layout all ports.
    //
    // Since ports drive or are driven by pins of symbol instance, derive the port
    // location from those pins
    //

    port DIFFI_IN           @[10, <pin DIFFI_IN of <instance IBUFS>>#-];
    port DO                 @[10, <pin DO of <instance OBUFS>>#-];
    port TS                 @[10, <pin TS of <instance OBUFS>>#-];
    
    port DIFFO_IN           @[10, <pin DIFFO_IN of <instance DIFFOSMUX>>#-];
    port DIN                @[160, <pin OUT of <instance IBUFS>>#-];
    port DIFFI_OUT          @[160,80];
    port PAD                @[96,95]; // pragma PAP_UI_ORIENTATION="NORTH"
    port MIPI_SW_DYN        @[10, <pin X0 of <instance MIPIMUX>>#-];
    port INBUF_DYN_DIS_N    @[10, <pin INBUF_DYN_DIS_N of <instance IBUFS>>#-];

    //
    // Layout all lines
    //

  line lnINBUF_DYN_DIS_N
      <port INBUF_DYN_DIS_N> ->
      <pin INBUF_DYN_DIS_N of <instance IBUFS>>;
      
  line lnDIFFI_IN
      <port DIFFI_IN> ->
      <pin DIFFI_IN of <instance IBUFS>>;
      
  line lnDIFFO_IN
      <port DIFFO_IN> ->
      <pin DIFFO_IN of <instance DIFFOSMUX>>;    

  line lnDO
      <port DO> ->
      <pin DO of <instance OBUFS>>;

  line lnTS
      <port TS> ->
      <pin TS of <instance OBUFS>>;

  line lnOBUFO_IN
      <pin OUT of <instance OBUFS>> ->
      <pin OBUFO_IN of <instance DIFFOSMUX>>;

  line lnPAD
      <pin OUT of <instance DIFFOSMUX>> ->
      [96,] ->
      [,<pin IN of <instance IBUFS>>#-] ->
      <pin IN of <instance IBUFS>>,

      [96,<pin OUT of <instance DIFFOSMUX>>#-] ->
      [96,80] ->
      <port PAD>,
      
      [96,80] ->
      <port DIFFI_OUT>;

  line lnDIN
      <pin OUT of <instance IBUFS>> ->
      <port DIN>;
      
  line lnMIPI_SW_DYN
      <port MIPI_SW_DYN> ->
      [(<port MIPI_SW_DYN>#|)+4, ] ->
      <pin X0 of <instance MIPIMUX>>,
      
      [(<port MIPI_SW_DYN>#|)+4, <port MIPI_SW_DYN>#-]->
      [ , <pin MIPI_SW_DYN of <instance OBUFS>>#-]->
      <pin MIPI_SW_DYN of <instance OBUFS>>,

     [(<port MIPI_SW_DYN>#|)+4, <pin MIPI_SW_DYN of <instance OBUFS>>#-]->
     [ , <pin MIPI_SW_DYN of <instance IBUFS>>#-]->
     <pin MIPI_SW_DYN of <instance IBUFS>>;
  
  line lnMIPIMUX
        <pin Y of <instance MIPIMUX>> ->
        [(<pin Y of <instance MIPIMUX>>#|)+4, ] ->
        [ , <pin MIPI_SW_DYN of <instance DIFFOSMUX>>#-] ->
        <pin MIPI_SW_DYN of <instance DIFFOSMUX>>;
  
   line lnMIPIMUX_1
        [(<instance MIPIMUX>#|)-2, <pin X1 of <instance MIPIMUX>>#-] -> 
        <pin X1  of <instance MIPIMUX>>; 
          
  map  (
         <line lnINBUF_DYN_DIS_N>   => <wire ntINBUF_DYN_DIS_N  of device IOBS (structure netlist)>,
         <line lnDIFFI_IN>          => <wire ntDIFFI_IN         of device IOBS (structure netlist)>,
         <line lnDIFFO_IN>          => <wire ntDIFFO_IN         of device IOBS (structure netlist)>,
         <line lnDO>                => <wire ntDO               of device IOBS (structure netlist)>,
         <line lnTS>                => <wire ntTS               of device IOBS (structure netlist)>,
         <line lnOBUFO_IN>          => <wire ntOBUFO_IN         of device IOBS (structure netlist)>,
         <line lnPAD>               => <wire ntPAD              of device IOBS (structure netlist)>,
         <line lnDIN>               => <wire ntDIN              of device IOBS (structure netlist)>,
         <line lnMIPI_SW_DYN>       => <wire ntMIPI_SW_DYN      of device IOBS (structure netlist)>,
         <line lnMIPIMUX>           => <wire ntMIPIMUX          of device IOBS (structure netlist)>
       );
};// end of schematic schm of IOBS

